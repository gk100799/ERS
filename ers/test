 
    survey
 
 SELECT b.date,
    a.event_id_id AS eventid,
    a.user_id_id AS username,
    b.event_name
   FROM ers_ersevent b
     JOIN ers_ersattended a ON a.event_id_id::text = b.id::text;


resposeview
 SELECT q.qid,
    q.event_id,
    q.question,
    q.option1,
    q.option2,
    q.option3,
    q.option4,
    s.user_id,
    s.response
   FROM ers_question q
     JOIN ers_surresponse s ON q.qid = s.question_id AND q.event_id::text = s.event_id::text;




response

 SELECT resp.event_id,
    ques.qid,
    ques.question,
    resp.option,
    resp.count,
    100.0 * resp.count::numeric / sum(resp.count) OVER (PARTITION BY ques.qid) AS percent
   FROM ers_question ques
     JOIN ( SELECT ers_surresponse.event_id,
            ers_surresponse.question_id,
            ers_surresponse.response AS option,
            count(*) AS count
           FROM ers_surresponse
          GROUP BY ers_surresponse.event_id, ers_surresponse.question_id, ers_surresponse.response) resp ON ques.qid = resp.question_id AND ques.event_id::text = resp.event_id::text
  ORDER BY ques.event_id, ques.qid, resp.count DESC; 










dd-mm-yyyy

hh:mm AM






select resp.event_id,qid,question,resp.option,resp.count,100.0*resp.count/(sum(resp.count) OVER (PARTITION BY qid)) AS percent from ers_question ques 
inner join 
(SELECT event_id,question_id,response as option, count(*) as count from ers_surresponse 
group by event_id,question_id,response) resp on ques.qid=resp.question_id
and ques.event_id='2'
order by ques.event_id,ques.qid,resp.count desc



ers_survey 

 SELECT b.date,
    a.event_id AS eventid,
    a.user_id AS username,
    b.event_name
   FROM ers_event b
     JOIN ers_registered a ON a.event_id::text = b.id::text;



     [('2', 1, 'How was the event', 'excellent', 2, Decimal('66.6666666666666667')), 
      ('2', 1, 'How was the event', 'bad', 1, Decimal('33.3333333333333333')), 
      ('2', 2, 'srsffsa fdbsdg dnhnhfbgfbxgf', 'fgdfg', 1, Decimal('100.0000000000000000')), 
      ('2', 3, 'dfgdsfg', 'sfgbsfgbfsg', 1, Decimal('100.0000000000000000'))] 